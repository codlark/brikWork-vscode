{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "brikWork",
	"scopeName": "source.brikWork",
	"comment": "brik names will be support.function or variable.function depending on builtin status. element names will be variable.something. types will be support.type",
	"patterns": [
		{
			"include": "#layout"
		}
	],
	"repository": {

		"layout": {
			"begin": "\\s*(layout)\\s* (\\{)",
			"beginCaptures": {
				"1": {"name": "entity.name.section.brikwork"},
				"2": {"name": "punctuation.section.begin.brikwork"}
			},
			"end": "(?<!\\\\)(\\})",
			"endCaptures": {
				"1": {"name": "punctuation.section.end.brikwork"}
			},
			"patterns": [
				{"include": "#property"}
			]
		},

		"property": {
			"begin": "\\s*([^:]+)\\s*(:)",
			"beginCaptures": {
				"1": {"name": "support.type.property-name.brikwork"},
				"2": {"name": "puncuation.seperator.key-value.brikwork"}
			},
			"end": "(?<=[^\\\\])(?:(;)|(?=\\n\\}))",
			"endCaptures": {
				"1": {"name": "punctuation.terminator.brikwork"}
			},
			"patterns": [
				{"include": "#escape"},
				{"include": "#brik"}
			]
		},

		"brik": {
			"name": "string.interpolated.brikwork",
			"begin": "\\[\\s*([^]|]+*)(?=[]|\\s])",
			"beginCaptures": {
				"0": {"name": "punctuation.definition.string.begin.brikwork"},
				"1": {"name": "variable.name.brikwork"}
			},
			"end": "\\]",
			"endCaptures": {
				"0": {"name": "punctuation.definition.string.end.brikwork"}
			},
			"patterns": [
				{"include": "#escape"},
				{
					"name": "punctuation.definition.string.continue.brikwork",
					"match": "\\|"
				},
				{"include": "#brik"}
			]
		},
		"escape": {
			
			"name":"constant.character.escape",
			"match": "\\\\[][nts\\\\;|:={}]"
		}
	}
}